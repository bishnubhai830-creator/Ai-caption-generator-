<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Free AI Caption Generator: Create Viral Social Media Captions Instantly - ViralCap AI</title>
    <meta name="description" content="Generate 5 free viral captions daily with our AI caption generator. Optimized for Instagram, TikTok, Twitter with SEO and trending phrases.">
    <link rel="icon" type="image/x-icon" href="/static/favicon.ico">
    <meta name="keywords" content="free AI caption generator, viral Instagram captions AI, best social media caption ideas 2025, SEO optimized TikTok captions">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap');
        body { font-family: 'Inter', sans-serif; background: linear-gradient(135deg, #f0f4ff, #e0e7ff); }
        h1, h2, h3, h4, h5, h6 { font-family: 'Inter', sans-serif; font-weight: 800; }
        .navbar-gradient { background: linear-gradient(90deg, #3b82f6, #10b981); }
        .caption-card { transition: transform 0.3s ease, box-shadow 0.3s ease; }
        .caption-card:hover { transform: translateY(-5px); box-shadow: 0 12px 24px rgba(0, 0, 0, 0.1); }
        .error-message { background: linear-gradient(135deg, #fee2e2, #fecaca); color: #991b1b; border: 1px solid #f87171; border-radius: 12px; padding: 20px; }
        .loading-spinner { border: 5px solid #e5e7eb; border-top: 5px solid #3b82f6; border-radius: 50%; width: 48px; height: 48px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .gradient-btn { background: linear-gradient(90deg, #3b82f6, #10b981); }
        .gradient-btn:hover { background: linear-gradient(90deg, #2563eb, #059669); }
        .gradient-btn:disabled { background: #d1d5db; cursor: not-allowed; }
        .pro-tip-card { transition: transform 0.3s ease, box-shadow 0.3s ease; }
        .pro-tip-card:hover { transform: translateY(-3px); box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1); }
    </style>
</head>
<body class="min-h-screen bg-gray-50">
    <nav class="navbar-gradient shadow-xl sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16 items-center">
                <div class="flex items-center">
                    <a href="index.html" class="text-white font-bold text-3xl tracking-tight">ViralCap AI</a>
                    <div class="hidden md:ml-10 md:flex md:space-x-8">
                        <a href="index.html" class="text-white hover:text-gray-200 px-3 py-2 text-sm font-medium">Home</a>
                        <a href="generator.html" class="text-white border-b-2 border-white px-3 py-2 text-sm font-medium">Generator</a>
                        <a href="blog.html" class="text-white hover:text-gray-200 px-3 py-2 text-sm font-medium">Blog</a>
                        <a href="pricing.html" class="text-white hover:text-gray-200 px-3 py-2 text-sm font-medium">Pricing</a>
                        <a href="about.html" class="text-white hover:text-gray-200 px-3 py-2 text-sm font-medium">About</a>
                        <a href="contact.html" class="text-white hover:text-gray-200 px-3 py-2 text-sm font-medium">Contact</a>
                    </div>
                </div>
                <div class="flex items-center">
                    <span class="text-sm text-white font-medium" id="captionCounter">5/5 captions today</span>
                </div>
            </div>
        </div>
    </nav>

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
        <div class="grid lg:grid-cols-4 gap-8">
            <div class="lg:col-span-1">
                <div class="bg-white rounded-2xl p-8 shadow-xl sticky top-24">
                    <h3 class="font-bold text-xl mb-6 text-gray-900">Pro Tips for Viral Content</h3>
                    <div class="space-y-6">
                        <div class="pro-tip-card bg-gradient-to-br from-blue-50 to-blue-100 p-5 rounded-xl">
                            <h4 class="font-semibold text-blue-700 mb-2">Trend Alert 2025</h4>
                            <p class="text-sm text-gray-700">Use "Scene samjhe ya samjhau?" for viral meme vibes! ðŸš€</p>
                        </div>
                        <div class="pro-tip-card bg-gradient-to-br from-green-50 to-green-100 p-5 rounded-xl">
                            <h4 class="font-semibold text-green-700 mb-2">Hashtag Strategy</h4>
                            <p class="text-sm text-gray-700">Blend trending and niche hashtags for max reach. ðŸ“ˆ</p>
                        </div>
                        <div class="pro-tip-card bg-gradient-to-br from-gray-50 to-gray-100 p-5 rounded-xl">
                            <h4 class="font-semibold text-gray-800 mb-2">Engagement Boost</h4>
                            <p class="text-sm text-gray-700">Ask questions to spark comments and interactions. ðŸ’¬</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="lg:col-span-3">
                <h1 class="text-4xl md:text-5xl font-extrabold mb-4 text-gray-900 tracking-tight">Create Viral Captions with AI Magic</h1>
                <p class="text-lg text-gray-600 mb-10">Generate 5 free, SEO-optimized captions daily for Instagram, TikTok, Twitter, and more. Share to unlock bonus captions! âœ¨</p>
                
                <div class="bg-white rounded-2xl p-8 shadow-xl mb-10">
                    <form id="captionForm">
                        <div class="grid md:grid-cols-2 gap-6 mb-8">
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">Describe Your Post</label>
                                <input type="text" placeholder="e.g., funny cat meme, beach sunset motivational" class="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200 bg-gray-50">
                            </div>
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">Platform</label>
                                <select class="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200 bg-gray-50">
                                    <option>Instagram</option>
                                    <option>TikTok</option>
                                    <option>Twitter</option>
                                    <option>Facebook</option>
                                </select>
                            </div>
                        </div>
                        <div class="mb-8">
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Tone</label>
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                                <label class="flex items-center text-sm font-medium text-gray-700">
                                    <input type="radio" name="tone" value="funny" class="mr-2 focus:ring-blue-500">
                                    Funny ðŸ˜„
                                </label>
                                <label class="flex items-center text-sm font-medium text-gray-700">
                                    <input type="radio" name="tone" value="inspirational" class="mr-2 focus:ring-blue-500">
                                    Inspirational ðŸŒŸ
                                </label>
                                <label class="flex items-center text-sm font-medium text-gray-700">
                                    <input type="radio" name="tone" value="witty" class="mr-2 focus:ring-blue-500">
                                    Witty ðŸ§ 
                                </label>
                                <label class="flex items-center text-sm font-medium text-gray-700">
                                    <input type="radio" name="tone" value="casual" class="mr-2 focus:ring-blue-500">
                                    Casual ðŸ˜Ž
                                </label>
                            </div>
                        </div>
                        <button type="submit" id="generateBtn" class="w-full gradient-btn text-white py-4 rounded-lg font-bold text-lg transition duration-300 shadow-lg">
                            Generate Viral Captions ðŸš€
                        </button>
                    </form>
                </div>

                <div id="captionsOutput" class="space-y-6"></div>
            </div>
        </div>
    </div>

    <script type="text/javascript">
        var gk_isXlsx = false;
        var gk_xlsxFileLookup = {};
        var gk_fileData = {};
        function filledCell(cell) {
          return cell !== '' && cell != null;
        }
        function loadFileData(filename) {
            if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
                try {
                    var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
                    var firstSheetName = workbook.SheetNames[0];
                    var worksheet = workbook.Sheets[firstSheetName];
                    var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
                    var filteredData = jsonData.filter(row => row.some(filledCell));
                    var headerRowIndex = filteredData.findIndex((row, index) =>
                        row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
                    );
                    if (headerRowIndex === -1 || headerRowIndex > 25) {
                        headerRowIndex = 0;
                    }
                    var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex));
                    csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
                    return csv;
                } catch (e) {
                    console.error(e);
                    return "";
                }
            }
            return gk_fileData[filename] || "";
        }

        let captionsGenerated = 0;
        const maxCaptions = 5;
        let isGenerating = false;

        if (localStorage.getItem('captionsGenerated')) {
            captionsGenerated = parseInt(localStorage.getItem('captionsGenerated'));
        }
        updateCounter();

        document.getElementById('captionForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            if (isGenerating) return;
            if (captionsGenerated >= maxCaptions) {
                showLimitPopup();
                return;
            }

            const generateBtn = document.getElementById('generateBtn');
            generateBtn.disabled = true;
            isGenerating = true;

            const prompt = this.querySelector('input[type="text"]').value;
            const platform = this.querySelector('select').value;
            const tone = this.querySelector('input[name="tone"]:checked')?.value || 'casual';
            
            if (!prompt.trim()) {
                const output = document.getElementById('captionsOutput');
                output.innerHTML = '<div class="error-message text-center py-8">Bhai, describe your post to generate captions! ðŸ˜…</div>';
                generateBtn.disabled = false;
                isGenerating = false;
                return;
            }
            
            await generateWithRetry(prompt, platform, tone);
            captionsGenerated++;
            localStorage.setItem('captionsGenerated', captionsGenerated.toString());
            updateCounter();
            generateBtn.disabled = false;
            isGenerating = false;
        });

        function detectLanguage(prompt) {
            const hindiRegex = /[\u0900-\u097F]/; // Devanagari script for Hindi
            const hasHindi = hindiRegex.test(prompt);
            const hasEnglish = /[a-zA-Z]/.test(prompt);
            
            if (hasHindi && hasEnglish) return 'hinglish';
            if (hasHindi) return 'hindi';
            return 'english';
        }

        async function generateWithRetry(prompt, platform, tone, maxRetries = 3) {
            for (let i = 0; i < maxRetries; i++) {
                try {
                    return await generateCaptions(prompt, platform, tone);
                } catch (error) {
                    if ((error.message.includes('429') || error.message.includes('503')) && i < maxRetries - 1) {
                        const waitTime = Math.pow(2, i) * 1000; // 1s, 2s, 4s
                        console.log(`Retry ${i+1} after ${waitTime}ms due to error...`);
                        await new Promise(resolve => setTimeout(resolve, waitTime));
                        continue;
                    }
                    throw error;
                }
            }
        }

        async function generateCaptions(prompt, platform, tone) {
            const output = document.getElementById('captionsOutput');
            output.innerHTML = '<div class="text-center py-8"><div class="loading-spinner mx-auto"></div><p class="text-gray-600 mt-4">Bhai, thodi der... viral captions ban rahe hain! ðŸš€</p></div>';
            
            const apiKey = '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';
            const language = detectLanguage(prompt);
            let languageInstruction = '';
            
            if (language === 'hindi') {
                languageInstruction = 'Generate captions in Hindi, keeping them natural and engaging.';
            } else if (language === 'hinglish') {
                languageInstruction = 'Generate captions in Hinglish (mix of Hindi and English), keeping them natural, trendy, and conversational.';
            } else {
                languageInstruction = 'Generate captions in English, keeping them natural and engaging.';
            }

            try {
                console.log(`Sending API request for prompt: "${prompt}", platform: ${platform}, tone: ${tone}, language: ${language}`);
                const url = 'https://api.openai.com/v1/chat/completions';
                const data = {
                    model: 'gpt-3.5-turbo',
                    messages: [
                        {
                            role: 'system',
                            content: 'You are a creative social media assistant specializing in viral content.'
                        },
                        {
                            role: 'user',
                            content: `${languageInstruction} Generate 5 natural, engaging, and viral-potential captions for a ${platform} post about "${prompt}" in a ${tone} tone. Analyze the description for key themes (e.g., "Chashma" for eyewear/glasses stories, "Tales" for narratives, "HatTrick" for achievements/sports wins, "Hub" for community/content hub) and incorporate relevant SEO keywords and trending terms for 2025 (e.g., #EyewearTrends, #AchievementVibes, #StoryHub, meme culture for TikTok, storytelling for Instagram, concise wit for Twitter, community focus for Facebook). Start with a catchy hook, keep captions short (under 150 chars for Twitter, crisp for others), use 1-2 emojis, include a question or CTA for engagement, ensure authenticity, and add 3-5 SEO-optimized hashtags including #ViralCapAI. Avoid copying the input. Format as a numbered list.`
                        }
                    ],
                    max_tokens: 500,
                    temperature: 0.7,
                    top_p: 0.9
                };

                const response = await fetch(url, {
                    method: 'POST',
                    headers: { 
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${apiKey}`
                    },
                    body: JSON.stringify(data)
                });

                if (!response.ok) {
                    const errorText = await response.text();
                    throw new Error(`API error: ${response.status} - ${errorText}`);
                }

                const result = await response.json();
                if (!result.choices || !result.choices[0]?.message?.content) {
                    throw new Error('Invalid API response: No valid captions returned');
                }

                const generatedText = result.choices[0].message.content;
                const captions = generatedText.split('\n').filter(line => line.trim()).map(line => line.replace(/^\d+\.\s*/, ''));

                if (captions.length === 0) {
                    throw new Error('No captions generated from API response');
                }

                displayCaptions(captions.slice(0, 5));
                createConfetti();
            } catch (error) {
                console.error('Caption generation failed:', error);
                output.innerHTML = `<div class="error-message text-center py-8">Bhai, abhi bhi issue: ${error.message}. Apna Open AI API key check kar ya naya bana at https://platform.openai.com/api-keys! ðŸ˜“<br><small>Tip: Retry button dabao, auto fix ho jaayega.</small></div>`;
            }
        }

        function displayCaptions(captions) {
            const output = document.getElementById('captionsOutput');
            output.innerHTML = '';

            captions.forEach((caption, index) => {
                const card = document.createElement('div');
                card.className = 'bg-white caption-card rounded-2xl p-6 shadow-lg border border-gray-100';
                card.innerHTML = `
                    <div class="flex justify-between items-start mb-4">
                        <span class="bg-blue-500 text-white px-4 py-1 rounded-full text-sm font-medium">Caption ${index + 1}</span>
                        <button onclick="copyToClipboard('${caption.replace(/'/g, "\\'")}')" class="text-gray-600 hover:text-blue-600 transition duration-200">
                            <i data-feather="copy"></i>
                        </button>
                    </div>
                    <p class="text-gray-800 mb-4 text-lg font-medium">${caption}</p>
                    <div class="flex flex-wrap gap-2">
                        <span class="bg-blue-100 text-blue-700 px-3 py-1 rounded-full text-sm font-medium">#ViralCapAI</span>
                    </div>
                `;
                output.appendChild(card);
            });

            feather.replace();
        }

        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                alert('Caption copied to clipboard! ðŸ“‹');
            }).catch(err => {
                console.error('Copy failed:', err);
                alert('Copy nahi hua, try again! ðŸ˜•');
            });
        }

        function showLimitPopup() {
            if (confirm("Bhai, 5 captions ho gaye! Social pe share kar 3 bonus captions ke liye. Abhi share kare?")) {
                window.open('https://twitter.com/intent/tweet?text=Check%20out%20ViralCap%20AI%20-%20the%20best%20free%20AI%20caption%20generator!%20%23ViralCapAI', '_blank');
            }
        }

        function updateCounter() {
            const counter = document.getElementById('captionCounter');
            if (counter) {
                counter.textContent = `${captionsGenerated}/${maxCaptions} captions today`;
            }
        }

        function createConfetti() {
            for (let i = 0; i < 30; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'fixed w-3 h-3 bg-blue-500 rounded-full pointer-events-none';
                    confetti.style.left = Math.random() * 100 + 'vw';
                    confetti.style.top = '-10px';
                    confetti.style.transition = 'all 2s ease-out';
                    document.body.appendChild(confetti);
                    setTimeout(() => {
                        confetti.style.transform = 'translateY(100vh)';
                        confetti.style.opacity = '0';
                    }, 50);
                    setTimeout(() => confetti.remove(), 2000);
                }, i * 50);
            }
        }

        feather.replace();
    </script>
</body>
</html>
